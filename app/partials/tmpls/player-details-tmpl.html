<form role="form" class="form-horizontal">
	<div class="form-group">
		<label class="col-sm-4 control-label" for="createdDate">Added on</label>
		<div class="col-sm-8">
			<input class="form-control" type="text" id="createdDate" name="playerName" ng-model="pCtrl.player.createDate" disabled="disabled"/>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-4 control-label" for="playerName">Name</label>
		<div class="col-sm-8">
			<input class="form-control" type="text" id="playerName" name="playerName" ng-model="pCtrl.player.name" disabled="disabled" ng-disabled="!pCtrl.isAdmin()"/>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-4 control-label" for="playerEmail">Email</label>
		<div class="col-sm-8">
			<input class="form-control" type="email" id="playerEmail" name="playerEmail" ng-model="pCtrl.player.email" disabled="disabled" ng-disabled="!pCtrl.isAdmin()"/>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-4 control-label" for="playerPhone">Phone</label>
		<div class="col-sm-8">
			<input class="form-control" type="tel" id="playerPhone" name="playerPhone" ng-model="pCtrl.player.phone" disabled="disabled" ng-disabled="!pCtrl.isAdmin()"/>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-4 control-label" for="playerBalance">Balance</label>
		<div class="col-sm-8">
			<input class="form-control" type="number" step="10" id="playerBalance" name="playerBalance" ng-model="pCtrl.player.balance" disabled="disabled"/>
		</div>
	</div>
</form>

<div class="loader" ng-show="loading">Loading...</div>
<div ng-hide="loading">
	<button class="btn btn-info refresh-data-btn" analytics-on analytics-event="Player Performance" analytics-category="Actions" analytics-label="{{ pCtrl.player.name }}">Refresh <span class="icon icon-refresh"></span></button>
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>Date</th>
				<th>Profit/Loss</th>
				<th>BBs</th>
				<th>Balance</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="game in pCtrl.playerGames" ng-class="{'success': (game.balance > 0), 'danger': (game.balance < 0)}">
				<td>
          <span>{{ game.date | date:'y-MM-dd' }}</span><a ui-sref="game({ gameId: (game.$id || game.id) })"><span class="icon icon-external-link"></span></a>
        </td>
				<td>
					<span ng-class="{'label label-success': (game.buyout > game.buyin), 'label label-danger': (game.buyout < game.buyin), 'label label-default': (game.buyout == game.buyin)}">{{ game.buyout - game.buyin }}</span>
				</td>
				<td>
					<span ng-class="{'label label-success': (game.buyout > game.buyin), 'label label-danger': (game.buyout < game.buyin), 'label label-default': (game.buyout == game.buyin)}">{{ (game.buyout - game.buyin) / 50 }}</span>
				</td>
				<td>
					<span ng-class="{'label label-success': (game.balance > 0), 'label label-danger': (game.balance < 0), 'label label-default': (game.balance == 0)}">{{ game.balance }}</span>
				</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<th>Played {{ pCtrl.playerGamesCount }} games</th>
				<th>{{ pCtrl.playerWinningSessions }} winning sessions <span class="badge">{{ pCtrl.playerWinningSessions / (pCtrl.playerGamesCount || 1) | percentage:1 }}</span></th>
				<th>Average winnings (in BBs): <span class="badge">{{ pCtrl.playerAvgWinning | number:2 }}</span></th>
				<th>
					{{ pCtrl.playerGames[pCtrl.playerGames.length - 1].balance }}
				</th>
			</tr>
		</tfoot>
	</table>
</div>
