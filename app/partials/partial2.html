<alert ng-repeat="msg in vm.serverMsg" type="{{ msg.type }}" close="vm.closeServerMsg($index)">{{msg.txt}}</alert>
		
<div class="row">
	<div id="players-control" class="col-sm-4" ng-class="{'nav-visible': vm.prefs.playersOpen}">
		<h3 class="hidden-xs"><i class="glyphicon glyphicon-user"></i> Players</h3>
		<div class="btn-group">
			<button title="Close" class="btn btn-danger visible-xs" id="close-players-panel" ng-click="vm.closePlayersControl()"><i class="glyphicon glyphicon-remove"></i></button>
			<button class="btn btn-success" ng-click="vm.openPlayerDetailsDialog()"><i class="glyphicon glyphicon-plus"></i> New Player</button>
		</div>
		<input class="form-control" ng-model="vm.playersFilter"/>
		<table class="table table-striped table-condensed">
			<tbody>
				<tr ng-repeat="player in vm.players | filter:playersFilter | orderBy:'name'">
					<td>
						<button class="btn btn-sm btn-default" ng-click="vm.openPlayerDetailsDialog(player)" ng-disabled="player.isPlaying"><i class="glyphicon glyphicon-pencil"></i>
						</button>
					</td>
					<td>
						<a href="mailto:{{player.email}}" title="{{player.email}}" target="_blank">{{player.name}}</a>
						<br/>
						<a href="tel:{{player.phone}}">{{player.phone}}</a>
					</td>
					<td>
						<span class="label" ng-class="{'label-success': (player.balance > 0), 'label-danger': (player.balance < 0), 'label-default': (player.balance == 0)}">{{player.balance}}</span>
					</td>
					<td>
						<button class="btn btn-sm btn-default" ng-click="vm.addPlayerToGame(player, game.settings.defaultBuyin)" ng-disabled="player.isPlaying" title="Join game"><i class="glyphicon glyphicon-chevron-right"></i>
						</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="col-sm-8">
		<on-going-game game="vm.game" save-success-callback="vm.gameSaved" save-fail-callback="vm.saveGameFailed"></on-going-game>
	</div>
</div>
<hr />

<div class="row">
	<div class="col-md-6">
		<button class="btn btn-success" ng-click="vm.newPlayer()">New</button>
		<ul>
			<li ng-repeat="player in vm.players">
				<div class="form-group">
					<div class="input-group">
						<input class="form-control" type="text" ng-model="player.name">
						<span class="input-group-btn">
							<button class="btn btn-success" ng-click="vm.save($index)">Save</button>
						</span>
					</div>
				</div>
			</li>
		</ul>
	</div>
	<div class="col-md-6">
		<div class="form-group">
			<button class="btn btn-success" ng-click="vm.newGame()">New</button>
			<input class="form-control" type="text" placeholder="Enter keyword" ng-model="vm.filter">
		</div>
		<div>Total: <span class="badge">{{ vm.games.length }}</span></div>
		<ul>
			<li ng-repeat="game in vm.games | filter:vm.filter">
				<div class="form-group">
					<div class="input-group">
						<input id="gameDate" class="form-control" type="text" datepicker-popup="yyyy-MM-dd" readonly="readonly" ng-model="game.date" datepicker-options="dateOptions" is-open="game.dateOpen" show-weeks="false" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-default" ng-click="vm.toggleGameDate($event, $index)"><i class="glyphicon glyphicon-calendar"></i></button>
						</span>
					</div>
					<div class="input-group">
						<input class="form-control" type="text" ng-model="game.location">
						<span class="input-group-btn">
							<button class="btn btn-success" ng-click="vm.saveGame($index)">Save</button>
						</span>
					</div>
				</div>
				<div class="form-group">
					# of players: {{ game.players.length }}
					<button class="btn btn-default" ng-click="vm.getPlayersOfGame(game)" ng-show="game.players.length === 0">Get players</button>
				</div>
			</li>
		</ul>
	</div>
</div>